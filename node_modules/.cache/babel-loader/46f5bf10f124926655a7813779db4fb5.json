{"ast":null,"code":"import axios from \"axios\";\nimport ApplicationError from \"../utils/ApplicationError\"; // import request from 'request';\n// import {\n//   generateHeaders,\n//   detectLocale,\n//   getRequestConfigForLogging,\n//   // getSummaryObjectForApiResponseTime,\n//   getHistogramObjectForApiResponseTime,\n// } from '../utils/Helpers';\n// import Logger from '../utils/Logger';\n// // const summary = getSummaryObjectForApiResponseTime();\n// const histogram = getHistogramObjectForApiResponseTime();\n// TODO: Intercept all responses for data and time logging purposes\n\nclass Service {\n  /**\n   * The base fetch method to get data from APIs\n   * @param {Object} requestConfig\n   * @param {String} requestConfig.method Method of request. Eg. GET, POST, PUT, DELETE, PATCH.\n   * @param {String} requestConfig.base Base domain of the request. This is the part of the URL before the path.\n   * @param {String} requestConfig.path Path of the request.\n   * @param {String} requestConfig.timeout Timout of the request in milliseconds.\n   * @param {Object} requestData\n   * @param {Object} requestData.params The GET parameters for the request.\n   * @param {Object} requestData.headers Custom headers that need to be part of the request.\n   * @param {Object} requestData.postData The POST data for the request.\n   * @return {Promise} Returns the promise object for the request.\n   */\n  static fetch() {\n    let {\n      method = \"GET\",\n      base = \"\",\n      path,\n      timeout = 0\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let {\n      params = {},\n      headers = {},\n      postData = {}\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const defaultHeaders = {};\n    const defaultParams = {};\n    let requestData = {};\n\n    if (Object.keys(postData).length > 0) {\n      requestData.data = postData;\n    }\n\n    const requestHeaders = { ...defaultHeaders\n    };\n    const requestParams = { ...defaultParams,\n      ...params\n    };\n    const requestEndpoint = base + path;\n    const requestMethod = method.toUpperCase();\n    const requestConfig = {\n      url: requestEndpoint,\n      method: requestMethod,\n      headers: requestHeaders,\n      params: requestParams,\n      ...(requestMethod !== \"GET\" ? requestData : {}),\n      responseType: \"json\" // proxy: {\n      //   protocol: 'http',\n      //   host: 'localhost',\n      //   port: 8081,\n      // },\n\n    };\n    return new Promise((resolve, reject) => {\n      axios(requestConfig).then(response => {\n        debugger;\n\n        if (response.status === 200) {\n          resolve({\n            data: response.data,\n            status: response.status,\n            headers: response.headers\n          });\n        } else {\n          const error = new Error();\n          error.data = response.data;\n          error.status = response.status;\n          error.headers = response.headers;\n          reject(error);\n        }\n      }).catch(function (error) {\n        if (error.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          if (error.response.status === 401) {\n            console.log(error.response.status); //  handle401();\n\n            error.response.handleRefresh = true;\n          }\n\n          reject(new ApplicationError({\n            error: error.response.data,\n            status: error.response.status\n          }));\n        } else if (error.request) {\n          // The request was made but no response was received\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          reject(new ApplicationError({\n            message: \"No response from server\"\n          }));\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          reject(new ApplicationError({\n            message: \"Something happened in setting up the request that triggered an Error\"\n          }));\n        }\n\n        reject(new ApplicationError({\n          error: error.response.data\n        }));\n      });\n    });\n  }\n\n}\n\nexport default Service;","map":{"version":3,"names":["axios","ApplicationError","Service","fetch","method","base","path","timeout","params","headers","postData","defaultHeaders","defaultParams","requestData","Object","keys","length","data","requestHeaders","requestParams","requestEndpoint","requestMethod","toUpperCase","requestConfig","url","responseType","Promise","resolve","reject","then","response","status","error","Error","catch","console","log","handleRefresh","request","message"],"sources":["/Users/bkarisik/Documents/Test/sawpi_frontend/swapi_front/src/api/service.js"],"sourcesContent":["import axios from \"axios\";\nimport ApplicationError from \"../utils/ApplicationError\";\n\n// import request from 'request';\n// import {\n//   generateHeaders,\n//   detectLocale,\n//   getRequestConfigForLogging,\n//   // getSummaryObjectForApiResponseTime,\n//   getHistogramObjectForApiResponseTime,\n// } from '../utils/Helpers';\n// import Logger from '../utils/Logger';\n\n// // const summary = getSummaryObjectForApiResponseTime();\n// const histogram = getHistogramObjectForApiResponseTime();\n\n// TODO: Intercept all responses for data and time logging purposes\n\nclass Service {\n  /**\n   * The base fetch method to get data from APIs\n   * @param {Object} requestConfig\n   * @param {String} requestConfig.method Method of request. Eg. GET, POST, PUT, DELETE, PATCH.\n   * @param {String} requestConfig.base Base domain of the request. This is the part of the URL before the path.\n   * @param {String} requestConfig.path Path of the request.\n   * @param {String} requestConfig.timeout Timout of the request in milliseconds.\n   * @param {Object} requestData\n   * @param {Object} requestData.params The GET parameters for the request.\n   * @param {Object} requestData.headers Custom headers that need to be part of the request.\n   * @param {Object} requestData.postData The POST data for the request.\n   * @return {Promise} Returns the promise object for the request.\n   */\n  static fetch(\n    { method = \"GET\", base = \"\", path, timeout = 0 } = {},\n    { params = {}, headers = {}, postData = {} } = {}\n  ) {\n    const defaultHeaders = {};\n    const defaultParams = {};\n\n    let requestData = {};\n    if (Object.keys(postData).length > 0) {\n      requestData.data = postData;\n    }\n\n    const requestHeaders = { ...defaultHeaders };\n    const requestParams = { ...defaultParams, ...params };\n    const requestEndpoint = base + path;\n    const requestMethod = method.toUpperCase();\n    const requestConfig = {\n      url: requestEndpoint,\n      method: requestMethod,\n      headers: requestHeaders,\n      params: requestParams,\n      ...(requestMethod !== \"GET\" ? requestData : {}),\n      responseType: \"json\",\n      // proxy: {\n      //   protocol: 'http',\n      //   host: 'localhost',\n      //   port: 8081,\n      // },\n    };\n\n    return new Promise((resolve, reject) => {\n      axios(requestConfig)\n        .then((response) => {\n          debugger;\n          if (response.status === 200) {\n            resolve({\n              data: response.data,\n              status: response.status,\n              headers: response.headers,\n            });\n          } else {\n            const error = new Error();\n            error.data = response.data;\n            error.status = response.status;\n            error.headers = response.headers;\n\n            reject(error);\n          }\n        })\n        .catch(function (error) {\n          if (error.response) {\n            // The request was made and the server responded with a status code\n            // that falls out of the range of 2xx\n            if (error.response.status === 401) {\n              console.log(error.response.status);\n              //  handle401();\n              error.response.handleRefresh = true;\n            }\n            reject(new ApplicationError({ error: error.response.data, status: error.response.status }));\n          } else if (error.request) {\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            reject(new ApplicationError({ message: \"No response from server\" }));\n          } else {\n            // Something happened in setting up the request that triggered an Error\n\n            reject(\n              new ApplicationError({\n                message: \"Something happened in setting up the request that triggered an Error\",\n              })\n            );\n          }\n          reject(new ApplicationError({ error: error.response.data }));\n        });\n    });\n  }\n}\n\nexport default Service;\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,gBAAP,MAA6B,2BAA7B,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;;AAEA,MAAMC,OAAN,CAAc;EACZ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACc,OAALC,KAAK,GAGV;IAAA,IAFA;MAAEC,MAAM,GAAG,KAAX;MAAkBC,IAAI,GAAG,EAAzB;MAA6BC,IAA7B;MAAmCC,OAAO,GAAG;IAA7C,CAEA,uEAFmD,EAEnD;IAAA,IADA;MAAEC,MAAM,GAAG,EAAX;MAAeC,OAAO,GAAG,EAAzB;MAA6BC,QAAQ,GAAG;IAAxC,CACA,uEAD+C,EAC/C;IACA,MAAMC,cAAc,GAAG,EAAvB;IACA,MAAMC,aAAa,GAAG,EAAtB;IAEA,IAAIC,WAAW,GAAG,EAAlB;;IACA,IAAIC,MAAM,CAACC,IAAP,CAAYL,QAAZ,EAAsBM,MAAtB,GAA+B,CAAnC,EAAsC;MACpCH,WAAW,CAACI,IAAZ,GAAmBP,QAAnB;IACD;;IAED,MAAMQ,cAAc,GAAG,EAAE,GAAGP;IAAL,CAAvB;IACA,MAAMQ,aAAa,GAAG,EAAE,GAAGP,aAAL;MAAoB,GAAGJ;IAAvB,CAAtB;IACA,MAAMY,eAAe,GAAGf,IAAI,GAAGC,IAA/B;IACA,MAAMe,aAAa,GAAGjB,MAAM,CAACkB,WAAP,EAAtB;IACA,MAAMC,aAAa,GAAG;MACpBC,GAAG,EAAEJ,eADe;MAEpBhB,MAAM,EAAEiB,aAFY;MAGpBZ,OAAO,EAAES,cAHW;MAIpBV,MAAM,EAAEW,aAJY;MAKpB,IAAIE,aAAa,KAAK,KAAlB,GAA0BR,WAA1B,GAAwC,EAA5C,CALoB;MAMpBY,YAAY,EAAE,MANM,CAOpB;MACA;MACA;MACA;MACA;;IAXoB,CAAtB;IAcA,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;MACtC5B,KAAK,CAACuB,aAAD,CAAL,CACGM,IADH,CACSC,QAAD,IAAc;QAClB;;QACA,IAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;UAC3BJ,OAAO,CAAC;YACNV,IAAI,EAAEa,QAAQ,CAACb,IADT;YAENc,MAAM,EAAED,QAAQ,CAACC,MAFX;YAGNtB,OAAO,EAAEqB,QAAQ,CAACrB;UAHZ,CAAD,CAAP;QAKD,CAND,MAMO;UACL,MAAMuB,KAAK,GAAG,IAAIC,KAAJ,EAAd;UACAD,KAAK,CAACf,IAAN,GAAaa,QAAQ,CAACb,IAAtB;UACAe,KAAK,CAACD,MAAN,GAAeD,QAAQ,CAACC,MAAxB;UACAC,KAAK,CAACvB,OAAN,GAAgBqB,QAAQ,CAACrB,OAAzB;UAEAmB,MAAM,CAACI,KAAD,CAAN;QACD;MACF,CAjBH,EAkBGE,KAlBH,CAkBS,UAAUF,KAAV,EAAiB;QACtB,IAAIA,KAAK,CAACF,QAAV,EAAoB;UAClB;UACA;UACA,IAAIE,KAAK,CAACF,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;YACjCI,OAAO,CAACC,GAAR,CAAYJ,KAAK,CAACF,QAAN,CAAeC,MAA3B,EADiC,CAEjC;;YACAC,KAAK,CAACF,QAAN,CAAeO,aAAf,GAA+B,IAA/B;UACD;;UACDT,MAAM,CAAC,IAAI3B,gBAAJ,CAAqB;YAAE+B,KAAK,EAAEA,KAAK,CAACF,QAAN,CAAeb,IAAxB;YAA8Bc,MAAM,EAAEC,KAAK,CAACF,QAAN,CAAeC;UAArD,CAArB,CAAD,CAAN;QACD,CATD,MASO,IAAIC,KAAK,CAACM,OAAV,EAAmB;UACxB;UACA;UACA;UACAV,MAAM,CAAC,IAAI3B,gBAAJ,CAAqB;YAAEsC,OAAO,EAAE;UAAX,CAArB,CAAD,CAAN;QACD,CALM,MAKA;UACL;UAEAX,MAAM,CACJ,IAAI3B,gBAAJ,CAAqB;YACnBsC,OAAO,EAAE;UADU,CAArB,CADI,CAAN;QAKD;;QACDX,MAAM,CAAC,IAAI3B,gBAAJ,CAAqB;UAAE+B,KAAK,EAAEA,KAAK,CAACF,QAAN,CAAeb;QAAxB,CAArB,CAAD,CAAN;MACD,CA3CH;IA4CD,CA7CM,CAAP;EA8CD;;AA1FW;;AA6Fd,eAAef,OAAf"},"metadata":{},"sourceType":"module"}